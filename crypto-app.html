<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>CryptoApp ‚Äî —à–∏—Ñ—Ä–∞—Ç–æ—Ä</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è Telegram Mini App, –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å) -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <style>
    :root {
      --bg: #050910;
      --bg-card: #0f172a;
      --bg-card-soft: #111827;
      --accent: #22c55e;
      --accent-soft: rgba(34, 197, 94, 0.2);
      --accent-text: #bbf7d0;
      --text: #f9fafb;
      --text-muted: #9ca3af;
      --border: #1f2937;
      --danger: #f97373;
      --radius-lg: 18px;
      --radius-sm: 10px;
      --shadow-soft: 0 10px 30px rgba(0, 0, 0, 0.5);
    }

    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Inter", sans-serif;
    }

    body {
      margin: 0;
      padding: 12px;
      background: radial-gradient(circle at top, #0b1120, #020617);
      color: var(--text);
    }

    .app {
      max-width: 480px;
      margin: 0 auto;
    }

    .app-header {
      padding: 14px 16px 12px;
      border-radius: var(--radius-lg);
      background: linear-gradient(135deg, #020617, #0b1120);
      border: 1px solid rgba(148, 163, 184, 0.25);
      box-shadow: var(--shadow-soft);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 14px;
    }

    .app-header-main {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #22c55e, #16a34a, #22c55e);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 18px;
      color: #022c22;
      box-shadow: 0 0 30px rgba(34, 197, 94, 0.45);
    }

    .app-title {
      font-size: 18px;
      font-weight: 600;
      letter-spacing: 0.02em;
    }

    .app-subtitle {
      font-size: 12px;
      color: var(--text-muted);
    }

    .badge {
      padding: 5px 10px;
      font-size: 11px;
      border-radius: 999px;
      border: 1px solid rgba(34, 197, 94, 0.4);
      background: rgba(22, 163, 74, 0.15);
      color: var(--accent-text);
      white-space: nowrap;
    }

    /* ‚îÄ‚îÄ‚îÄ Tabs ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */

    .tabs {
      display: flex;
      gap: 6px;
      background: rgba(15, 23, 42, 0.85);
      border-radius: var(--radius-lg);
      padding: 4px;
      border: 1px solid var(--border);
      margin-bottom: 10px;
    }

    .tab-button {
      flex: 1;
      border: none;
      background: transparent;
      color: var(--text-muted);
      font-size: 13px;
      padding: 8px 4px;
      border-radius: var(--radius-sm);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 4px;
      transition: 0.18s ease;
    }

    .tab-button span.emoji {
      font-size: 15px;
    }

    .tab-button.active {
      background: radial-gradient(circle at top left, #22c55e33, #0f172a);
      color: var(--text);
      box-shadow: 0 0 0 1px rgba(34, 197, 94, 0.35),
        0 10px 20px rgba(0, 0, 0, 0.7);
    }

    .tab-content {
      display: none;
      padding: 12px;
      border-radius: var(--radius-lg);
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid var(--border);
      box-shadow: var(--shadow-soft);
      margin-bottom: 12px;
    }

    .tab-content.active {
      display: block;
    }

    h2 {
      font-size: 16px;
      margin: 0 0 8px;
    }

    h3 {
      font-size: 14px;
      margin: 10px 0 6px;
    }

    p {
      margin: 4px 0;
      font-size: 13px;
      color: var(--text-muted);
    }

    /* ‚îÄ‚îÄ‚îÄ Forms / controls ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */

    .field {
      margin-bottom: 10px;
    }

    .field-label {
      display: block;
      font-size: 12px;
      color: var(--text-muted);
      margin-bottom: 4px;
    }

    select,
    input[type="text"],
    input[type="number"],
    textarea {
      width: 100%;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: var(--bg-card-soft);
      color: var(--text);
      padding: 8px 10px;
      font-size: 13px;
      outline: none;
      resize: vertical;
      min-height: 38px;
    }

    textarea {
      min-height: 80px;
    }

    select:focus,
    input:focus,
    textarea:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(34, 197, 94, 0.4);
    }

    .btn-row {
      display: flex;
      gap: 8px;
      margin-top: 4px;
      flex-wrap: wrap;
    }

    .btn {
      flex: 1;
      min-width: 0;
      border-radius: 999px;
      border: none;
      font-size: 13px;
      padding: 8px 10px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 4px;
      transition: 0.16s ease;
      white-space: nowrap;
    }

    .btn-primary {
      background: linear-gradient(135deg, #22c55e, #16a34a);
      color: #022c22;
      font-weight: 600;
    }

    .btn-outline {
      background: transparent;
      color: var(--text);
      border: 1px solid var(--border);
    }

    .btn-ghost {
      background: rgba(15, 23, 42, 0.8);
      color: var(--text-muted);
      border: 1px dashed rgba(148, 163, 184, 0.4);
    }

    .btn:active {
      transform: scale(0.97);
      opacity: 0.9;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 8px;
      border-radius: 999px;
      font-size: 11px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid var(--border);
      color: var(--text-muted);
      margin-right: 6px;
      margin-bottom: 4px;
    }

    .pill strong {
      color: var(--accent-text);
    }

    .hint {
      font-size: 11px;
      color: var(--text-muted);
      margin-top: 2px;
    }

    /* –¢–∞–±–ª–∏—Ü–∞ –≤ –æ–±—É—á–µ–Ω–∏–∏ */

    .method-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 6px;
      font-size: 12px;
    }

    .method-table th,
    .method-table td {
      padding: 6px 8px;
      border-radius: 10px;
    }

    .method-table thead {
      background: rgba(15, 23, 42, 0.9);
    }

    .method-table tbody tr {
      background: rgba(15, 23, 42, 0.8);
    }

    .method-table tbody tr + tr {
      margin-top: 4px;
    }

    .method-table td:first-child {
      font-weight: 500;
    }

    .method-table .stars {
      color: #fbbf24;
      font-size: 11px;
    }

    .chips {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      margin-bottom: 4px;
    }

    .chip {
      font-size: 11px;
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.4);
      color: var(--text-muted);
    }

    .history-step {
      padding: 8px 10px;
      border-radius: 12px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid var(--border);
      margin-bottom: 6px;
      font-size: 13px;
    }

    .history-step-number {
      font-size: 11px;
      color: var(--accent-text);
      margin-bottom: 2px;
    }

    .history-step-title {
      font-weight: 500;
      margin-bottom: 2px;
    }

    .footer {
      text-align: center;
      font-size: 10px;
      color: var(--text-muted);
      margin-top: 4px;
      opacity: 0.75;
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- –®–∞–ø–∫–∞ -->
    <header class="app-header">
      <div class="app-header-main">
        <div class="logo">C</div>
        <div>
          <div class="app-title">CryptoApp</div>
          <div class="app-subtitle">–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π</div>
        </div>
      </div>
      <div class="badge">End-to-end —à–∏—Ñ—Ä–∞—Ç–æ—Ä</div>
    </header>

    <!-- –í–∫–ª–∞–¥–∫–∏ -->
    <nav class="tabs">
      <button class="tab-button active" data-tab-target="tab-encrypt">
        <span class="emoji">üõ°</span>
        <span>–®–∏—Ñ—Ä–æ–≤–∞—Ç—å</span>
      </button>
      <button class="tab-button" data-tab-target="tab-keys">
        <span class="emoji">üîë</span>
        <span>–ö–ª—é—á–∏</span>
      </button>
      <button class="tab-button" data-tab-target="tab-messages">
        <span class="emoji">üì®</span>
        <span>–°–æ–æ–±—â–µ–Ω–∏—è</span>
      </button>
      <button class="tab-button" data-tab-target="tab-learn">
        <span class="emoji">üìö</span>
        <span>–û–±—É—á–µ–Ω–∏–µ</span>
      </button>
    </nav>

    <!-- –í–∫–ª–∞–¥–∫–∞: –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ -->
    <section id="tab-encrypt" class="tab-content active">
      <h2>–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Ç–æ–¥ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è</h2>
      <p>–î–ª—è –≤–∞–∂–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ–ª–µ–µ —Å–∏–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä <strong>Fernet</strong>.</p>

      <div class="field">
        <label class="field-label" for="method-select">–ú–µ—Ç–æ–¥ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è</label>
        <select id="method-select">
          <option value="caesar">1Ô∏è‚É£ –¶–µ–∑–∞—Ä—å</option>
          <option value="atbash">2Ô∏è‚É£ –ê—Ç–±–∞—à</option>
          <option value="vigenere">3Ô∏è‚É£ –í–∏–∂–µ–Ω–µ—Ä</option>
          <option value="base64">4Ô∏è‚É£ Base64</option>
          <option value="fernet">5Ô∏è‚É£ Fernet (–ø—Å–µ–≤–¥–æ)</option>
        </select>
      </div>

      <div class="field">
        <label class="field-label" for="key-input">–ö–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è</label>
        <input id="key-input" type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 3, –ø–∞—Ä–æ–ª—å –∏–ª–∏ –∫–ª—é—á" />
        <div class="hint">–î–ª—è –¶–µ–∑–∞—Ä—è ‚Äî —á–∏—Å–ª–æ, –¥–ª—è –í–∏–∂–µ–Ω–µ—Ä–∞ ‚Äî —Å–ª–æ–≤–æ, –¥–ª—è Fernet ‚Äî —Å–ª–æ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å.</div>
      </div>

      <div class="field">
        <label class="field-label" for="text-input">–í–∞—à —Ç–µ–∫—Å—Ç</label>
        <textarea id="text-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –Ω—É–∂–Ω–æ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –∏–ª–∏ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å"></textarea>
      </div>

      <div class="btn-row">
        <button class="btn btn-primary" id="btn-encrypt">
          üîí –ó–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å
        </button>
        <button class="btn btn-outline" id="btn-decrypt">
          üîì –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å
        </button>
      </div>

      <div class="field" style="margin-top: 10px;">
        <label class="field-label" for="result-output">–†–µ–∑—É–ª—å—Ç–∞—Ç</label>
        <textarea id="result-output" readonly placeholder="–ó–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç"></textarea>
        <div class="btn-row" style="margin-top: 6px;">
          <button class="btn btn-outline" id="btn-copy-result">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
        </div>
      </div>
    </section>

    <!-- –í–∫–ª–∞–¥–∫–∞: –ö–ª—é—á–∏ -->
    <section id="tab-keys" class="tab-content">
      <h2>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–ª—é—á–µ–π</h2>
      <p>–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∫–ª—é—á–∏ –ø—Ä—è–º–æ –≤ –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∏ —Å–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –∏—Ö —É —Å–µ–±—è.</p>

      <div class="field">
        <label class="field-label" for="key-type-select">–¢–∏–ø –∫–ª—é—á–∞</label>
        <select id="key-type-select">
          <option value="number">–ß–∏—Å–ª–æ–≤–æ–π (–¥–ª—è –¶–µ–∑–∞—Ä—è)</option>
          <option value="word">–°–ª–æ–≤–µ—Å–Ω—ã–π (–¥–ª—è –í–∏–∂–µ–Ω–µ—Ä–∞)</option>
          <option value="strong">–°–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å (–¥–ª—è Fernet)</option>
        </select>
      </div>

      <div class="btn-row">
        <button class="btn btn-primary" id="btn-generate-key">
          ‚öôÔ∏è –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á
        </button>
      </div>

      <div class="field" style="margin-top: 10px;">
        <label class="field-label">–í–∞—à –Ω–æ–≤—ã–π –∫–ª—é—á</label>
        <input id="generated-key" type="text" readonly placeholder="–ù–∞–∂–º–∏—Ç–µ ¬´–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á¬ª" />
        <div class="btn-row" style="margin-top: 6px;">
          <button class="btn btn-outline" id="btn-save-key">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          <button class="btn btn-outline" id="btn-copy-key">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
        </div>
      </div>

      <h3>–°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∫–ª—é—á–∏</h3>
      <p class="hint">–ö–ª—é—á–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ (localStorage) –∏ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä.</p>
      <div id="saved-keys-list" class="field"></div>
    </section>

    <!-- –í–∫–ª–∞–¥–∫–∞: –°–æ–æ–±—â–µ–Ω–∏—è -->
    <section id="tab-messages" class="tab-content">
      <h2>–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ</h2>

      <div class="field">
        <label class="field-label" for="send-method-select">–ú–µ—Ç–æ–¥ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è</label>
        <select id="send-method-select">
          <option value="caesar">–®–∏—Ñ—Ä –¶–µ–∑–∞—Ä—è</option>
          <option value="atbash">–®–∏—Ñ—Ä –ê—Ç–±–∞—à</option>
          <option value="vigenere">–®–∏—Ñ—Ä –í–∏–∂–µ–Ω–µ—Ä–∞</option>
          <option value="base64">Base64</option>
          <option value="fernet">Fernet (AES)</option>
        </select>
      </div>

      <div class="field">
        <label class="field-label" for="send-key-input">–ö–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è</label>
        <input id="send-key-input" type="text" placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ –∫–ª—é—á" />
      </div>

      <div class="field">
        <label class="field-label" for="recipient-id-input">ID –ø–æ–ª—É—á–∞—Ç–µ–ª—è</label>
        <input id="recipient-id-input" type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 123456789" />
        <div class="hint">–ü–æ–ª—É—á–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —É–∑–Ω–∞—Ç—å —Å–≤–æ–π ID —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É <strong>/start</strong> –≤ –±–æ—Ç–µ.</div>
      </div>

      <div class="field">
        <label class="field-label" for="send-message-input">–°–æ–æ–±—â–µ–Ω–∏–µ</label>
        <textarea id="send-message-input" placeholder="–¢–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å"></textarea>
      </div>

      <div class="btn-row">
        <button class="btn btn-primary" id="btn-send">
          üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å
        </button>
        <button class="btn btn-ghost" id="btn-add-to-history">
          üìù –í –∏—Å—Ç–æ—Ä–∏—é
        </button>
      </div>

      <h3 style="margin-top: 12px;">–ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π</h3>
      <p class="hint">–î–ª—è –¥–µ–º–æ –∏—Å—Ç–æ—Ä–∏—è —Ö—Ä–∞–Ω–∏—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ. –í –±–æ–µ–≤–æ–º –±–æ—Ç–µ –≤—ã –º–æ–∂–µ—Ç–µ —Å–≤—è–∑–∞—Ç—å —ç—Ç–æ —Å —Å–µ—Ä–≤–µ—Ä–æ–º.</p>
      <div id="history-list"></div>
    </section>

    <!-- –í–∫–ª–∞–¥–∫–∞: –û–±—É—á–µ–Ω–∏–µ -->
    <section id="tab-learn" class="tab-content">
      <h2>–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —à–∏—Ñ—Ä–∞—Ç–æ—Ä–æ–º</h2>

      <div class="history-step">
        <div class="history-step-number">–®–∞–≥ 1</div>
        <div class="history-step-title">–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Ç–æ–¥ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è</div>
        <div>–ö–∞–∂–¥—ã–π –º–µ—Ç–æ–¥ –∏–º–µ–µ—Ç —Å–≤–æ—é —Å—Ç–µ–ø–µ–Ω—å –∑–∞—â–∏—Ç—ã. –î–ª—è –æ–±—ã—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–¥–æ–π–¥—É—Ç –¶–µ–∑–∞—Ä—å –∏–ª–∏ –í–∏–∂–µ–Ω–µ—Ä, –¥–ª—è –≤–∞–∂–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Fernet.</div>
      </div>

      <div class="history-step">
        <div class="history-step-number">–®–∞–≥ 2</div>
        <div class="history-step-title">–°–æ–∑–¥–∞–π—Ç–µ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–ª—é—á</div>
        <div>–ö–ª—é—á ‚Äî —ç—Ç–æ —Å–µ–∫—Ä–µ—Ç, –∫–æ—Ç–æ—Ä—ã–π –∑–Ω–∞—é—Ç —Ç–æ–ª—å–∫–æ –≤—ã –∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—å. –ë–µ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∫–ª—é—á–∞ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ.</div>
      </div>

      <div class="history-step">
        <div class="history-step-number">–®–∞–≥ 3</div>
        <div class="history-step-title">–ó–∞—à–∏—Ñ—Ä—É–π—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ</div>
        <div>–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –∏ –Ω–∞–∂–º–∏—Ç–µ ¬´–ó–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å¬ª. –ü–æ–ª—É—á–µ–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ–º—É —É–≥–æ–¥–Ω–æ.</div>
      </div>

      <div class="history-step">
        <div class="history-step-number">–®–∞–≥ 4</div>
        <div class="history-step-title">–ü–µ—Ä–µ–¥–∞–π—Ç–µ –∫–ª—é—á –±–µ–∑–æ–ø–∞—Å–Ω–æ</div>
        <div>–ö–ª—é—á –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –ø–æ–ª—É—á–∞—Ç–µ–ª—é –æ—Ç–¥–µ–ª—å–Ω–æ (–≥–æ–ª–æ—Å–æ–º, –¥—Ä—É–≥–∏–º –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–æ–º). –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ –∫–ª—é—á –≤–º–µ—Å—Ç–µ —Å –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º!</div>
      </div>

      <h3 style="margin-top: 10px;">–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤</h3>
      <table class="method-table">
        <thead>
          <tr>
            <th>–ú–µ—Ç–æ–¥</th>
            <th>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</th>
            <th>–°–∫–æ—Ä–æ—Å—Ç—å</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>–¶–µ–∑–∞—Ä—å</td>
            <td class="stars">‚≠ê‚≠ê</td>
            <td class="stars">‚ö°‚ö°‚ö°</td>
          </tr>
          <tr>
            <td>–ê—Ç–±–∞—à</td>
            <td class="stars">‚≠ê</td>
            <td class="stars">‚ö°‚ö°‚ö°</td>
          </tr>
          <tr>
            <td>–í–∏–∂–µ–Ω–µ—Ä</td>
            <td class="stars">‚≠ê‚≠ê‚≠ê</td>
            <td class="stars">‚ö°‚ö°</td>
          </tr>
          <tr>
            <td>Base64</td>
            <td class="stars">‚≠ê</td>
            <td class="stars">‚ö°‚ö°‚ö°</td>
          </tr>
          <tr>
            <td>Fernet</td>
            <td class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td>
            <td class="stars">‚ö°‚ö°</td>
          </tr>
        </tbody>
      </table>

      <h3 style="margin-top: 12px;">–ß—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?</h3>
      <div class="chips">
        <div class="chip">–¶–µ–∑–∞—Ä—å ‚Äî –¥–ª—è –ª–∞–π—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π</div>
        <div class="chip">–í–∏–∂–µ–Ω–µ—Ä ‚Äî –±–∞–ª–∞–Ω—Å –ø—Ä–æ—Å—Ç–æ—Ç—ã –∏ –∑–∞—â–∏—Ç—ã</div>
        <div class="chip">Fernet ‚Äî –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ –≤–∞–∂–Ω—ã—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤</div>
      </div>
    </section>

    <div class="footer">
      CryptoApp ¬∑ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞ ¬∑ –≤–∞—à–∏ –∫–ª—é—á–∏ –æ—Å—Ç–∞—é—Ç—Å—è —É –≤–∞—Å
    </div>
  </div>

  <script>
    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    document.addEventListener("DOMContentLoaded", () => {
      const tabButtons = document.querySelectorAll(".tab-button");
      const tabContents = document.querySelectorAll(".tab-content");

      tabButtons.forEach((btn) => {
        btn.addEventListener("click", () => {
          const targetId = btn.dataset.tabTarget;

          // —Å–Ω—è—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
          tabButtons.forEach((b) => b.classList.remove("active"));
          tabContents.forEach((c) => c.classList.remove("active"));

          // –≤–∫–ª—é—á–∏—Ç—å –Ω—É–∂–Ω—É—é
          btn.classList.add("active");
          const target = document.getElementById(targetId);
          if (target) target.classList.add("active");
        });
      });

      // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      // –ü—Ä–∏–º–∏—Ç–∏–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
      // (—á—Ç–æ–±—ã –≤—Å—ë –Ω–µ –±—ã–ª–æ —Å–æ–≤—Å–µ–º –ø—É—Å—Ç—ã–º)
      // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

      const ruAlphabet = "–∞–±–≤–≥–¥–µ—ë–∂–∑–∏–π–∫–ª–º–Ω–æ–ø—Ä—Å—Ç—É—Ñ—Ö—Ü—á—à—â—ä—ã—å—ç—é—è";
      const ruAlphabetUpper = ruAlphabet.toUpperCase();

      function caesarShift(text, shift) {
        const n = ruAlphabet.length;
        shift = ((shift % n) + n) % n;
        return Array.from(text).map((ch) => {
          const lowerIndex = ruAlphabet.indexOf(ch);
          if (lowerIndex !== -1) {
            return ruAlphabet[(lowerIndex + shift + n) % n];
          }
          const upperIndex = ruAlphabetUpper.indexOf(ch);
          if (upperIndex !== -1) {
            return ruAlphabetUpper[(upperIndex + shift + n) % n];
          }
          return ch;
        }).join("");
      }

      function atbash(text) {
        const reversed = ruAlphabet.split("").reverse().join("");
        const reversedUpper = reversed.toUpperCase();
        return Array.from(text).map((ch) => {
          const i = ruAlphabet.indexOf(ch);
          if (i !== -1) return reversed[i];
          const iu = ruAlphabetUpper.indexOf(ch);
          if (iu !== -1) return reversedUpper[iu];
          return ch;
        }).join("");
      }

      function vigenere(text, key, encrypt = true) {
        const cleanedKey = Array.from(key.toLowerCase()).filter((c) =>
          ruAlphabet.includes(c)
        );
        if (!cleanedKey.length) return text;
        let keyIndex = 0;
        const n = ruAlphabet.length;

        return Array.from(text).map((ch) => {
          const isUpper = ruAlphabetUpper.includes(ch);
          const alphabet = isUpper ? ruAlphabetUpper : ruAlphabet;
          const idx = alphabet.indexOf(ch);
          if (idx === -1) return ch;

          const k = cleanedKey[keyIndex % cleanedKey.length];
          const kShift = ruAlphabet.indexOf(k);
          const shift = encrypt ? kShift : -kShift;
          keyIndex++;

          return alphabet[(idx + shift + n) % n];
        }).join("");
      }

      function base64Encode(text) {
        try {
          return btoa(unescape(encodeURIComponent(text)));
        } catch {
          return text;
        }
      }

      function base64Decode(text) {
        try {
          return decodeURIComponent(escape(atob(text)));
        } catch {
          return text;
        }
      }

      // Fernet –ø–æ-—á–µ—Å—Ç–Ω–æ–º—É –Ω–µ —Ä–µ–∞–ª–∏–∑—É–µ–º ‚Äî –ø—Ä–æ—Å—Ç–æ –ø—Å–µ–≤–¥–æ
      function fakeFernetEncrypt(text, key) {
        return base64Encode(key + "::" + text);
      }

      function fakeFernetDecrypt(text, key) {
        const decoded = base64Decode(text);
        if (decoded.startsWith(key + "::")) {
          return decoded.slice((key + "::").length);
        }
        return decoded;
      }

      const methodSelect = document.getElementById("method-select");
      const keyInput = document.getElementById("key-input");
      const textInput = document.getElementById("text-input");
      const resultOutput = document.getElementById("result-output");
      const btnEncrypt = document.getElementById("btn-encrypt");
      const btnDecrypt = document.getElementById("btn-decrypt");
      const btnCopyResult = document.getElementById("btn-copy-result");

      function encrypt() {
        const method = methodSelect.value;
        const key = keyInput.value.trim();
        const text = textInput.value;

        let res = text;

        switch (method) {
          case "caesar": {
            const shift = parseInt(key || "3", 10) || 3;
            res = caesarShift(text, shift);
            break;
          }
          case "atbash":
            res = atbash(text);
            break;
          case "vigenere":
            res = vigenere(text, key || "–∫–ª—é—á", true);
            break;
          case "base64":
            res = base64Encode(text);
            break;
          case "fernet":
            res = fakeFernetEncrypt(text, key || "secret");
            break;
        }
        resultOutput.value = res;
      }

      function decrypt() {
        const method = methodSelect.value;
        const key = keyInput.value.trim();
        const text = textInput.value;

        let res = text;

        switch (method) {
          case "caesar": {
            const shift = parseInt(key || "3", 10) || 3;
            res = caesarShift(text, -shift);
            break;
          }
          case "atbash":
            res = atbash(text); // –æ–±—Ä–∞—Ç–∏–º—ã–π
            break;
          case "vigenere":
            res = vigenere(text, key || "–∫–ª—é—á", false);
            break;
          case "base64":
            res = base64Decode(text);
            break;
          case "fernet":
            res = fakeFernetDecrypt(text, key || "secret");
            break;
        }
        resultOutput.value = res;
      }

      btnEncrypt.addEventListener("click", encrypt);
      btnDecrypt.addEventListener("click", decrypt);

      btnCopyResult.addEventListener("click", async () => {
        if (!resultOutput.value) return;
        try {
          await navigator.clipboard.writeText(resultOutput.value);
          btnCopyResult.textContent = "‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ";
          setTimeout(() => (btnCopyResult.textContent = "üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å"), 1200);
        } catch {
          // —Ç–∏—Ö–æ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º
        }
      });

      // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      // –ö–ª—é—á–∏ (localStorage)
      // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

      const keyTypeSelect = document.getElementById("key-type-select");
      const generatedKeyInput = document.getElementById("generated-key");
      const btnGenerateKey = document.getElementById("btn-generate-key");
      const btnSaveKey = document.getElementById("btn-save-key");
      const btnCopyKey = document.getElementById("btn-copy-key");
      const savedKeysList = document.getElementById("saved-keys-list");

      function randomInt(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
      }

      function randomWord(len) {
        const letters = ruAlphabet.replace("—ë", "–µ");
        let result = "";
        for (let i = 0; i < len; i++) {
          result += letters[randomInt(0, letters.length - 1)];
        }
        return result;
      }

      function randomStrongPassword(length = 16) {
        const chars =
          "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_-+=[]{}";
        let res = "";
        for (let i = 0; i < length; i++) {
          res += chars[randomInt(0, chars.length - 1)];
        }
        return res;
      }

      btnGenerateKey.addEventListener("click", () => {
        const type = keyTypeSelect.value;
        let key = "";
        if (type === "number") key = String(randomInt(1, 33));
        else if (type === "word") key = randomWord(6);
        else key = randomStrongPassword(18);

        generatedKeyInput.value = key;
      });

      function loadSavedKeys() {
        const raw = localStorage.getItem("cryptoapp_keys") || "[]";
        let list;
        try {
          list = JSON.parse(raw);
        } catch {
          list = [];
        }
        savedKeysList.innerHTML = "";
        if (!list.length) {
          savedKeysList.innerHTML =
            '<p class="hint">–ü–æ–∫–∞ –Ω–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π.</p>';
          return;
        }
        list.forEach((item, index) => {
          const pill = document.createElement("div");
          pill.className = "pill";
          pill.innerHTML = `<strong>${item.label}</strong> ¬∑ ${item.value}`;
          pill.addEventListener("click", () => {
            keyInput.value = item.value;
            generatedKeyInput.value = item.value;
          });

          const del = document.createElement("button");
          del.textContent = "‚úï";
          del.style.border = "none";
          del.style.background = "transparent";
          del.style.color = "var(--text-muted)";
          del.style.cursor = "pointer";
          del.style.fontSize = "10px";
          del.addEventListener("click", (e) => {
            e.stopPropagation();
            list.splice(index, 1);
            localStorage.setItem("cryptoapp_keys", JSON.stringify(list));
            loadSavedKeys();
          });

          pill.appendChild(del);
          savedKeysList.appendChild(pill);
        });
      }

      btnSaveKey.addEventListener("click", () => {
        const val = generatedKeyInput.value.trim();
        if (!val) return;
        const raw = localStorage.getItem("cryptoapp_keys") || "[]";
        let list;
        try {
          list = JSON.parse(raw);
        } catch {
          list = [];
        }
        const label = keyTypeSelect.options[keyTypeSelect.selectedIndex].text;
        list.push({ label, value: val });
        localStorage.setItem("cryptoapp_keys", JSON.stringify(list));
        loadSavedKeys();
      });

      btnCopyKey.addEventListener("click", async () => {
        if (!generatedKeyInput.value) return;
        try {
          await navigator.clipboard.writeText(generatedKeyInput.value);
          btnCopyKey.textContent = "‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ";
          setTimeout(() => (btnCopyKey.textContent = "üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å"), 1200);
        } catch {}
      });

      loadSavedKeys();

      // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      // –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π (–ª–æ–∫–∞–ª—å–Ω–æ)
      // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

      const sendMethodSelect = document.getElementById("send-method-select");
      const sendKeyInput = document.getElementById("send-key-input");
      const recipientIdInput = document.getElementById("recipient-id-input");
      const sendMessageInput = document.getElementById("send-message-input");
      const btnSend = document.getElementById("btn-send");
      const btnAddToHistory = document.getElementById("btn-add-to-history");
      const historyList = document.getElementById("history-list");

      function loadHistory() {
        const raw = localStorage.getItem("cryptoapp_history") || "[]";
        let history;
        try {
          history = JSON.parse(raw);
        } catch {
          history = [];
        }
        historyList.innerHTML = "";
        if (!history.length) {
          historyList.innerHTML =
            '<p class="hint">–ò—Å—Ç–æ—Ä–∏—è –ø–æ–∫–∞ –ø—É—Å—Ç–∞—è.</p>';
          return;
        }

        history
          .slice()
          .reverse()
          .forEach((item) => {
            const block = document.createElement("div");
            block.className = "history-step";
            block.innerHTML = `
              <div class="history-step-number">${item.method}</div>
              <div class="history-step-title">–ü–æ–ª—É—á–∞—Ç–µ–ª—å: ${item.to}</div>
              <div>${item.text}</div>
            `;
            historyList.appendChild(block);
          });
      }

      function addHistoryItem() {
        const methodLabel =
          sendMethodSelect.options[sendMethodSelect.selectedIndex].text;
        const to = recipientIdInput.value.trim() || "–Ω–µ —É–∫–∞–∑–∞–Ω";
        const text = sendMessageInput.value.trim();
        if (!text) return;
        const raw = localStorage.getItem("cryptoapp_history") || "[]";
        let history;
        try {
          history = JSON.parse(raw);
        } catch {
          history = [];
        }
        history.push({
          method: methodLabel,
          to,
          text,
          time: Date.now(),
        });
        localStorage.setItem("cryptoapp_history", JSON.stringify(history));
        loadHistory();
      }

      btnAddToHistory.addEventListener("click", addHistoryItem);

      btnSend.addEventListener("click", () => {
        // –ó–¥–µ—Å—å –≤ –±–æ–µ–≤–æ–π –≤–µ—Ä—Å–∏–∏ –º–æ–∂–Ω–æ –¥–µ—Ä–≥–∞—Ç—å Telegram WebApp / backend
        addHistoryItem();
        if (window.Telegram && Telegram.WebApp) {
          Telegram.WebApp.showPopup({
            title: "–°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–æ",
            message:
              "–í –¥–µ–º–æ-–≤–µ—Ä—Å–∏–∏ –º—ã —Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é. –í –±–æ–µ–≤–æ–º –±–æ—Ç–µ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫–∞.",
            buttons: [{ id: "ok", type: "close", text: "–û–∫" }],
          });
        } else {
          alert(
            "–î–µ–º–æ: —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∏—Å—Ç–æ—Ä–∏—é. –í –±–æ–µ–≤–æ–º –±–æ—Ç–µ –∑–¥–µ—Å—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä."
          );
        }
      });

      loadHistory();
    });
  </script>
</body>
</html>
